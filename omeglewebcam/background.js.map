{"version":3,"sources":["webpack:///webpack/bootstrap d44db661676c049a53a9?1829","webpack:///./src/background.js","webpack:///./src/analytics.js","webpack:///./src/uuid.js"],"names":["analytics","require","inject","uuid","pushEvent","analyticsEvent","window","postMessage","omeglewebcamAnalyticsEvent","setupMessagePasser","chrome","runtime","sendMessage","t","setInterval","ec","ea","addEventListener","event","data","encode","object","parts","key","push","encodeURI","join","onMessage","addListener","message","request","XMLHttpRequest","payload","v","tid","cid","localStorage","googleAnalyticsClientId","generateUUID","sr","screen","width","height","vp","innerWidth","innerHeight","open","cacheBuster","Math","random","send","module","exports","replace","c","r","toString"],"mappings":"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","file":"extension/background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d44db661676c049a53a9\n **/","const analytics = require('./analytics');\nanalytics.inject();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/background.js\n **/","const uuid = require('./uuid');\n\n\nconst analytics = {\n  pushEvent: function(analyticsEvent) {\n    /* run from page script */\n    window.postMessage({omeglewebcamAnalyticsEvent: analyticsEvent}, '*');\n  },\n\n  setupMessagePasser: function() {\n    /* run from content script */\n\n    chrome.runtime.sendMessage({\n      omeglewebcamAnalyticsEvent: {\n        t: 'pageview'\n      }\n    });\n\n    setInterval(function() {\n      chrome.runtime.sendMessage({\n        omeglewebcamAnalyticsEvent: {\n          t: 'event',\n          ec: 'pulse',\n          ea: ''\n        }\n      });\n    }, 1000 * 60 * 5);\n\n    window.addEventListener('message', (event) => {\n      if(event.data.omeglewebcamAnalyticsEvent) {\n        chrome.runtime.sendMessage({\n          omeglewebcamAnalyticsEvent: event.data.omeglewebcamAnalyticsEvent\n        });\n      }\n    });\n  },\n\n  inject: function() {\n    /* run from background script */\n\n    function encode(object) {\n      const parts = [];\n      for(let key in object) {\n        parts.push(`${encodeURI(key)}=${encodeURI(object[key])}`);\n      }\n      return parts.join('&');\n    }\n\n    chrome.runtime.onMessage.addListener((message) => {\n      if(!message.omeglewebcamAnalyticsEvent) {\n        return;\n      }\n\n      let request = new XMLHttpRequest();\n      let payload = {\n        v: 1,\n        tid: 'UA-84264854-1',\n        cid: localStorage.googleAnalyticsClientId = localStorage.googleAnalyticsClientId || uuid.generateUUID(),\n        sr: `${window.screen.width}x${window.screen.height}`,\n        vp: `${window.innerWidth}x${window.innerHeight}`\n      };\n      for(let key in message.omeglewebcamAnalyticsEvent) {\n        payload[key] = message.omeglewebcamAnalyticsEvent[key];\n      }\n      request.open('POST', 'https://www.google-analytics.com/collect');\n      const cacheBuster = '&z=' + (Math.random() * 16 | 0);\n      request.send(encode(payload) + cacheBuster);\n    });\n  }\n};\n\nmodule.exports = analytics;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/analytics.js\n **/","function generateUUID() {\n  /* adapted from http://stackoverflow.com/a/2117523 */\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    let r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);\n    return v.toString(16);\n  });\n}\n\nmodule.exports = {\n  generateUUID: generateUUID\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/uuid.js\n **/"],"sourceRoot":""}